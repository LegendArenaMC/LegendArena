package me.thenameman.legendarena.listeners;import me.thenameman.legendarena.core.*;import me.thenameman.legendarena.utils.*;import org.bukkit.*;import org.bukkit.event.*;import org.bukkit.event.player.*;/** * @author TheNameMan */public class ChatListener implements Listener {    @EventHandler(priority = EventPriority.HIGHEST, ignoreCancelled = false)    public void onChat(AsyncPlayerChatEvent ev) {        boolean isStaff = Rank.getRank(ev.getPlayer(), Rank.Helper);        if(LegendArena.isChatMuted() && !isStaff) {            ev.setCancelled(true);            ev.getPlayer().sendMessage(ChatColor.RED + "Chat is globally muted!");        } else {            ev.setFormat(ChatUtils.getFormattedChat(ev.getMessage(), ev.getPlayer()));        }    }}